---

  - hosts: proxmox
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: ironicbadger.figurine
      - role: ironicbadger.hddtemp
      - role: ironicbadger.proxmox_nag_removal
      - role: deev-proxmox
      - role: ktz-sanoid
      - role: ironicbadger.snapraid

  - hosts: caddy
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: ktz-caddy

  - hosts: samba
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: vladgh.samba.server

  - hosts: tailscale
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: deev-tailscale

  - hosts: plex
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: geerlingguy.docker
      - role: deev-docker-compose
        tags: compose

  - hosts: prometheus
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: cloudalchemy.prometheus
      - role: deev-prometheus
