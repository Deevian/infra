---

  - hosts: proxmox
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: ironicbadger.figurine
      - role: ironicbadger.hddtemp
      - role: ironicbadger.proxmox_nag_removal
      - role: ironicbadger.bash_aliases
      - role: deev-proxmox
      - role: ktz-sanoid
      - role: ironicbadger.snapraid

  - hosts: caddy
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: ktz-caddy

  - hosts: samba
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: vladgh.samba.server

  - hosts: plex
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: geerlingguy.docker
      - role: ironicbadger.docker_compose_generator
    tasks:
      - name: start docker compose
        command: "docker-compose up -d"

  - hosts: prometheus
    vars_files:
      - 'vars/vault.yaml'
    roles:
      - role: deev-pkg
      - role: cloudalchemy.prometheus
      - role: deev-prometheus
